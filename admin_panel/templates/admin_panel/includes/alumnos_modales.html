<!-- ===========================================================
     MODALES DE ALUMNOS – SCODA (VERSIÓN FINAL CON CALLE/NUMERO/DEPTO + SEXO)
=========================================================== -->

<!-- ===========================================================
     MODAL CREAR FAMILIA
=========================================================== -->
<div class="modal fade" id="modalForm" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header bg-success text-white">
        <h5 class="modal-title fw-bold">
          <i class="bi bi-people-fill me-2"></i> Registrar Familia (Apoderados + Hijos)
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form id="formFamilia">

          <!-- ===========================================================
               APODERADO PRINCIPAL
          ============================================================ -->
          <h5 class="fw-bold text-success mb-3">Apoderado Principal</h5>

          <div class="row g-2">

            <div class="col-md-4">
              <label class="fw-semibold">Nombres</label>
              <input type="text" name="nombres_apoderado" class="form-control" required>
            </div>

            <div class="col-md-4">
              <label class="fw-semibold">Apellido paterno</label>
              <input type="text" name="apellido_uno_apoderado" class="form-control" required>
            </div>

            <div class="col-md-4">
              <label class="fw-semibold">Apellido materno</label>
              <input type="text" name="apellido_dos_apoderado" class="form-control">
            </div>

            <div class="col-md-4">
              <label class="fw-semibold">RUN</label>
              <input type="text" name="run_apoderado" class="form-control" required>
            </div>

            <div class="col-md-4">
              <label class="fw-semibold">Correo electrónico</label>
              <input type="email" name="email_apoderado" class="form-control">
            </div>

            <div class="col-md-4">
              <label class="fw-semibold">Teléfono</label>
              <input type="text" name="fono_apoderado" class="form-control">
            </div>

            <!-- SEXO -->
            <div class="col-md-4">
              <label class="fw-semibold">Sexo</label>
              <select name="sexo_apoderado" class="form-select">
                <option value="">Seleccione...</option>
                <option value="M">Masculino</option>
                <option value="F">Femenino</option>
                <option value="O">Otro</option>
              </select>
            </div>

            <!-- PAÍS -->
            <div class="col-md-4">
              <label class="fw-semibold">País</label>
              <select name="pais_apoderado" class="form-select" required></select>
            </div>

            <!-- REGIÓN -->
            <div class="col-md-4">
              <label class="fw-semibold">Región</label>
              <select name="region_apoderado" class="form-select" required></select>
            </div>

            <!-- COMUNA -->
            <div class="col-md-4">
              <label class="fw-semibold">Comuna</label>
              <select name="comuna_apoderado" class="form-select" required></select>
            </div>


            <!-- DIRECCIÓN (CALLE / NUMERO / DEPTO) -->
            <div class="col-md-4">
              <label class="fw-semibold">Calle</label>
              <input type="text" name="calle_apoderado" class="form-control" required>
            </div>

            <div class="col-md-2">
              <label class="fw-semibold">Número</label>
              <input type="text" name="numero_apoderado" class="form-control" required>
            </div>

            <div class="col-md-2">
              <label class="fw-semibold">Depto (opcional)</label>
              <input type="text" name="depto_apoderado" class="form-control">
            </div>

            <!-- FECHA NACIMIENTO -->
            <div class="col-md-4">
              <label class="fw-semibold">Fecha nacimiento</label>
              <input type="date" name="fecha_nac_apoderado" class="form-control">
            </div>

            <!-- PARENTESCO -->
            <div class="col-md-4">
              <label class="fw-semibold">Parentesco</label>
              <select name="parentesco_apoderado" class="form-select" required>
                <option value="Apoderado">Apoderado (principal)</option>
                <option value="Padre">Padre</option>
                <option value="Madre">Madre</option>
                <option value="Abuelo">Abuelo</option>
                <option value="Abuela">Abuela</option>
                <option value="Tío">Tío</option>
                <option value="Tía">Tía</option>
                <option value="Hermano">Hermano</option>
                <option value="Hermana">Hermana</option>
                <option value="Otro">Otro</option>
              </select>
            </div>

            <div class="col-md-4 d-flex align-items-end">
              <label class="fw-semibold ms-2">
                <input type="checkbox" name="autorizado" checked> Autorizado para retiro
              </label>
            </div>

          </div>

          <hr class="my-4">

          <!-- ===========================================================
               APODERADOS ADICIONALES
          ============================================================ -->
          <h5 class="fw-bold text-success mb-3">Apoderados Adicionales (Máximo 2)</h5>

          <div id="contenedorApoderadosExtra"></div>

          <button type="button" id="btnAgregarApoderadoExtra" class="btn btn-outline-success btn-sm mt-2">
            <i class="bi bi-person-plus"></i> Agregar apoderado
          </button>

          <hr class="my-4">

          <!-- ===========================================================
               HIJOS
          ============================================================ -->
          <h5 class="fw-bold text-success mb-3">Hijos</h5>

          <div id="contenedorHijos"></div>

          <button type="button" id="btnAgregarHijo" class="btn btn-outline-success btn-sm mt-2 mb-3">
            <i class="bi bi-plus-circle"></i> Agregar hijo
          </button>

        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button form="formFamilia" type="submit" class="btn btn-success">Guardar familia</button>
      </div>

    </div>
  </div>
</div>


<!-- ===========================================================
     MODAL EDITAR ALUMNO
=========================================================== -->
<div class="modal fade" id="modalEditar" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-md modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header bg-warning">
        <h5 class="modal-title fw-bold">
          <i class="bi bi-pencil-square me-2"></i> Editar Alumno
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <form id="formEditar">
          <input type="hidden" name="id">

          <div class="row g-2">

            <div class="col-md-6">
              <label class="fw-semibold">Nombres</label>
              <input type="text" name="nombres" class="form-control" required>
            </div>

            <div class="col-md-6">
              <label class="fw-semibold">Apellido paterno</label>
              <input type="text" name="apellido_uno" class="form-control" required>
            </div>

            <div class="col-md-6">
              <label class="fw-semibold">Apellido materno</label>
              <input type="text" name="apellido_dos" class="form-control">
            </div>

            <div class="col-md-6">
              <label class="fw-semibold">RUN</label>
              <input type="text" name="run" class="form-control" required>
            </div>

            <div class="col-md-6">
              <label class="fw-semibold">Fecha nacimiento</label>
              <input type="date" name="fecha_nacimiento" class="form-control">
            </div>

            <div class="col-md-6">
              <label class="fw-semibold">Curso</label>
              <select name="curso_id" class="form-select"></select>
            </div>

            <!-- SEXO ALUMNO -->
            <div class="col-md-6">
              <label class="fw-semibold">Sexo</label>
              <select name="sexo" class="form-select">
                <option value="">Seleccione...</option>
                <option value="M">Masculino</option>
                <option value="F">Femenino</option>
                <option value="O">Otro</option>
              </select>
            </div>

          </div>

        </form>

      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button form="formEditar" class="btn btn-success">Guardar cambios</button>
      </div>

    </div>
  </div>
</div>

<!-- ===========================================================
     MODAL DETALLE
=========================================================== -->
{% include "admin_panel/includes/alumnos_detalle_modal.html" %}
